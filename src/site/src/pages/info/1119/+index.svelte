<script>
  import Image from "#site-component/Image";
  import Layout from "#site-component/Layout";
  import AuthorProjects from "#site/components/frames/external/author/Projects.svelte";
  import {
    AuditDaily,
    Statistic,
  } from "#site/components/frames/statistic/mod.js";

  import PagesRouter from "#site/lib/Router.js";
  import { onMount } from "svelte";

  const Component = {
    mainNode: null,
  };
  const Interaction = {
    onIntersection(node, entries) {
      node.classList.add("visible");
    },
  };
  onMount(() => {
    const sections = [
      ...Component.mainNode.querySelectorAll(".page-main > section"),
    ];
    for (const sectionNode of sections) {
      const observer = new IntersectionObserver(([entry]) => {
        if (entry.isIntersecting === false) {
          return;
        }

        Interaction.onIntersection(sectionNode, entry);
        observer.unobserve(sectionNode);
      });

      observer.observe(sectionNode);
      continue;
    }
  });
</script>

<Layout>
  <header>
    <element-wrapper>
      <Image
        src="https://i.ibb.co/JrhvjFB/mute-command-gif.gif"
        alt="muteCommand"
        className="image_muteCommand"
      />
    </element-wrapper>
  </header>

  <main bind:this={Component.mainNode} class="page-main">
    <h1>–ë–æ—Ç –±–µ–∑ —è–≤–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞</h1>
    <p>
      –Ø –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–µ –º–æ–≥—É –æ–ø–∏—Å–∞—Ç—å –µ–≥–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π, –≤–µ–¥—å –Ω–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π
      –∑–∞–¥–∞—á–∏ –∏–ª–∏ —Ç–µ–º—ã –∫ –∫–æ—Ç–æ—Ä–æ–π –æ–Ω –±—ã–ª –±—ã –ø—Ä–∏–≤—è–∑–∞–Ω.
    </p>
    <p>
      –ù–µ—Ç –∏ –æ—Å–æ–±–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —á–µ—Ä—Ç, –≤–µ–¥—å –≤—Å—ë, —á—Ç–æ –∏–º–µ–µ—Ç —ç—Ç–æ—Ç –±–æ—Ç —É–∂–µ –∫–æ–≥–¥–∞-—Ç–æ
      —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–æ: –ø—Ä–æ–∫–ª—è—Ç–∏—è, –∏—Å–ø—ã—Ç–∞–Ω–∏—è, –Ω–µ–¥–æ-—ç–∫–æ–Ω–æ–º–∏–∫–∞, –æ–±—â–∞—è –∫–∞–∑–Ω–∞, —à—É—Ç–æ—á–Ω—ã–µ
      –≤–µ—â–∏, —É—Ç–∏–ª–∏—Ç—ã –∏ –¥—Ä—É–≥–∏–µ –≤–µ—â–∏.
    </p>
    <p>
      <a
        href={PagesRouter.relativeToPage(PagesRouter.getPageBy("commands").key)}
        >–°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥.</a
      >
    </p>

    <hr style:margin-block="10vh" />

    <section style:padding-top="20vh">
      <Statistic />
    </section>

    <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</h2>
    <section>
      <hr />
      <hr />
      <hr />
      <AuditDaily />
      <p style="font-size: 0.8em; opacity: 0.8; margin-top: 15vh;">
        –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–≤–∞–¥—Ä–∞—Ç, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –ø–æ–¥—Ä–æ–±–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞
        –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–µ–Ω—å.
      </p>
      <span>üëã</span>
    </section>

    <h2>–î—Ä—É–≥–∏–µ –ø—Ä–æ–µ–∫—Ç—ã</h2>
    <section style:container="none">
      <hr />
      <hr />
      <hr />
      <p>
        –ü–æ–∂–∞–ª—É–π, —è –∑–∞–π–º—É —ç—Ç–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ —Å–≤–æ–∏–º–∏ —Ö–æ–±–±–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏, –æ –∫–æ—Ç–æ—Ä—ã—Ö –≤–∞–º
        –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ —É–∑–Ω–∞—Ç—å. –ü–æ–π–º–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ: –∏–Ω–∞—á–µ —ç—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±—É–¥–µ—Ç
        –≤—ã–≥–ª—è–¥–∏—Ç—å –∏–∑–ª–∏—à–Ω–µ –ø—É—Å—Ç–æ–π. –≠—Ç–æ –≤–µ—Å–æ–º–æ–µ –æ–ø—Ä–∞–≤–¥–∞–Ω–∏–µ!
      </p>
      <AuthorProjects />
    </section>
  </main>
</Layout>

<style>
  header {
    display: flex;
    justify-content: start;
  }

  header element-wrapper {
    --padding: calc(7px + 0.5vw);
    border-radius: 30px;
    width: calc(10px + 20vw);
    height: calc(20vh + 10px);

    padding-bottom: var(--padding);
    border: var(--padding) solid #88888811;
    background: var(--text-theme-accent);

    overflow: hidden;

    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  header element-wrapper :global(.image_muteCommand) {
    object-fit: cover;
    object-position: left;
    height: 100%;
    width: 100%;
  }

  header element-wrapper::after {
    content: "";
    position: absolute;
    bottom: 0;
    border: 2px solid var(--background-theme-accent);
    border-radius: 50%;
    width: calc(var(--padding) / 2);
    aspect-ratio: 1 / 1;
    transform: translateY(50%);
  }

  .page-main {
    overflow: hidden;
  }

  .page-main > section {
    transition:
      opacity 2s,
      transform 0.5s;
    margin-bottom: 15vh;
    min-height: 20vh;

    container: section / inline-size;
  }

  .page-main > section:not(.visible) {
    transform: translateY(15%);
    opacity: 0;
  }
</style>
